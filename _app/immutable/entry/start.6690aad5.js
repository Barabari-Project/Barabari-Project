var st=Object.defineProperty,ct=Object.defineProperties;var lt=Object.getOwnPropertyDescriptors;var pe=Object.getOwnPropertySymbols;var Je=Object.prototype.hasOwnProperty,Ke=Object.prototype.propertyIsEnumerable;var Ve=(t,a,i)=>a in t?st(t,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[a]=i,M=(t,a)=>{for(var i in a||(a={}))Je.call(a,i)&&Ve(t,i,a[i]);if(pe)for(var i of pe(a))Ke.call(a,i)&&Ve(t,i,a[i]);return t},G=(t,a)=>ct(t,lt(a));var ze=(t,a)=>{var i={};for(var s in t)Je.call(t,s)&&a.indexOf(s)<0&&(i[s]=t[s]);if(t!=null&&pe)for(var s of pe(t))a.indexOf(s)<0&&Ke.call(t,s)&&(i[s]=t[s]);return i};var P=(t,a,i)=>new Promise((s,d)=>{var h=p=>{try{f(i.next(p))}catch(g){d(g)}},I=p=>{try{f(i.throw(p))}catch(g){d(g)}},f=p=>p.done?s(p.value):Promise.resolve(p.value).then(h,I);f((i=i.apply(t,a)).next())});import{o as Be,t as ke}from"../chunks/index.daee325e.js";import{S as nt,a as at,I as H,g as Ge,f as Ye,b as Se,c as me,s as J,i as Re,d as re,e as Y,P as We,h as ft}from"../chunks/singletons.b4182430.js";function ut(t,a){return t==="/"||a==="ignore"?t:a==="never"?t.endsWith("/")?t.slice(0,-1):t:a==="always"&&!t.endsWith("/")?t+"/":t}function dt(t){return t.split("%25").map(decodeURI).join("%25")}function ht(t){for(const a in t)t[a]=decodeURIComponent(t[a]);return t}const pt=["href","pathname","search","searchParams","toString","toJSON"];function mt(t,a){const i=new URL(t);for(const s of pt){let d=i[s];Object.defineProperty(i,s,{get(){return a(),d},enumerable:!0,configurable:!0})}return gt(i),i}function gt(t){Object.defineProperty(t,"hash",{get(){throw new Error("Cannot access event.url.hash. Consider using `$page.url.hash` inside a component instead")}})}const yt="/__data.json";function wt(t){return t.replace(/\/$/,"")+yt}function rt(t){try{return JSON.parse(sessionStorage[t])}catch(a){}}function Xe(t,a){const i=JSON.stringify(a);try{sessionStorage[t]=i}catch(s){}}function _t(...t){let a=5381;for(const i of t)if(typeof i=="string"){let s=i.length;for(;s;)a=a*33^i.charCodeAt(--s)}else if(ArrayBuffer.isView(i)){const s=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);let d=s.length;for(;d;)a=a*33^s[--d]}else throw new TypeError("value must be a string or TypedArray");return(a>>>0).toString(36)}const ge=window.fetch;window.fetch=(t,a)=>((t instanceof Request?t.method:(a==null?void 0:a.method)||"GET")!=="GET"&&ie.delete(Oe(t)),ge(t,a));const ie=new Map;function bt(t,a){const i=Oe(t,a),s=document.querySelector(i);if(s!=null&&s.textContent){const d=JSON.parse(s.textContent),{body:h}=d,I=ze(d,["body"]),f=s.getAttribute("data-ttl");return f&&ie.set(i,{body:h,init:I,ttl:1e3*Number(f)}),Promise.resolve(new Response(h,I))}return ge(t,a)}function vt(t,a,i){if(ie.size>0){const s=Oe(t,i),d=ie.get(s);if(d){if(performance.now()<d.ttl&&["default","force-cache","only-if-cached",void 0].includes(i==null?void 0:i.cache))return new Response(d.body,d.init);ie.delete(s)}}return ge(a,i)}function Oe(t,a){let s=`script[data-sveltekit-fetched][data-url=${JSON.stringify(t instanceof Request?t.url:t)}]`;if(a!=null&&a.headers||a!=null&&a.body){const d=[];a.headers&&d.push([...new Headers(a.headers)].join(",")),a.body&&(typeof a.body=="string"||ArrayBuffer.isView(a.body))&&d.push(a.body),s+=`[data-hash="${_t(...d)}"]`}return s}const Et=/^(\[)?(\.\.\.)?(\w+)(?:=(\w+))?(\])?$/;function kt(t){const a=[];return{pattern:t==="/"?/^\/$/:new RegExp(`^${Rt(t).map(s=>{const d=/^\[\.\.\.(\w+)(?:=(\w+))?\]$/.exec(s);if(d)return a.push({name:d[1],matcher:d[2],optional:!1,rest:!0,chained:!0}),"(?:/(.*))?";const h=/^\[\[(\w+)(?:=(\w+))?\]\]$/.exec(s);if(h)return a.push({name:h[1],matcher:h[2],optional:!0,rest:!1,chained:!0}),"(?:/([^/]+))?";if(!s)return;const I=s.split(/\[(.+?)\](?!\])/);return"/"+I.map((p,g)=>{if(g%2){if(p.startsWith("x+"))return Le(String.fromCharCode(parseInt(p.slice(2),16)));if(p.startsWith("u+"))return Le(String.fromCharCode(...p.slice(2).split("-").map(j=>parseInt(j,16))));const m=Et.exec(p);if(!m)throw new Error(`Invalid param: ${p}. Params and matcher names can only have underscores and alphanumeric characters.`);const[,D,N,k,x]=m;return a.push({name:k,matcher:x,optional:!!D,rest:!!N,chained:N?g===1&&I[0]==="":!1}),N?"(.*?)":D?"([^/]*)?":"([^/]+?)"}return Le(p)}).join("")}).join("")}/?$`),params:a}}function St(t){return!/^\([^)]+\)$/.test(t)}function Rt(t){return t.slice(1).split("/").filter(St)}function Lt(t,a,i){const s={},d=t.slice(1);let h=0;for(let I=0;I<a.length;I+=1){const f=a[I],p=d[I-h];if(f.chained&&f.rest&&h){s[f.name]=d.slice(I-h,I+1).filter(g=>g).join("/"),h=0;continue}if(p===void 0){f.rest&&(s[f.name]="");continue}if(!f.matcher||i[f.matcher](p)){s[f.name]=p;const g=a[I+1],m=d[I+1];g&&!g.rest&&g.optional&&m&&(h=0);continue}if(f.optional&&f.chained){h++;continue}return}if(!h)return s}function Le(t){return t.normalize().replace(/[[\]]/g,"\\$&").replace(/%/g,"%25").replace(/\//g,"%2[Ff]").replace(/\?/g,"%3[Ff]").replace(/#/g,"%23").replace(/[.*+?^${}()|\\]/g,"\\$&")}function It({nodes:t,server_loads:a,dictionary:i,matchers:s}){const d=new Set(a);return Object.entries(i).map(([f,[p,g,m]])=>{const{pattern:D,params:N}=kt(f),k={id:f,exec:x=>{const j=D.exec(x);if(j)return Lt(j,N,s)},errors:[1,...m||[]].map(x=>t[x]),layouts:[0,...g||[]].map(I),leaf:h(p)};return k.errors.length=k.layouts.length=Math.max(k.errors.length,k.layouts.length),k});function h(f){const p=f<0;return p&&(f=~f),[p,t[f]]}function I(f){return f===void 0?f:[d.has(f),t[f]]}}let oe=class{constructor(a,i){this.status=a,typeof i=="string"?this.body={message:i}:i?this.body=i:this.body={message:`Error: ${a}`}}toString(){return JSON.stringify(this.body)}},Ze=class{constructor(a,i){this.status=a,this.location=i}};function At(t){return P(this,null,function*(){var a;for(const i in t)if(typeof((a=t[i])==null?void 0:a.then)=="function")return Object.fromEntries(yield Promise.all(Object.entries(t).map(h=>P(this,[h],function*([s,d]){return[s,yield d]}))));return t})}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");const Ot=-1,Pt=-2,Ut=-3,jt=-4,Nt=-5,xt=-6;function $t(t,a){if(typeof t=="number")return d(t,!0);if(!Array.isArray(t)||t.length===0)throw new Error("Invalid input");const i=t,s=Array(i.length);function d(h,I=!1){if(h===Ot)return;if(h===Ut)return NaN;if(h===jt)return 1/0;if(h===Nt)return-1/0;if(h===xt)return-0;if(I)throw new Error("Invalid input");if(h in s)return s[h];const f=i[h];if(!f||typeof f!="object")s[h]=f;else if(Array.isArray(f))if(typeof f[0]=="string"){const p=f[0],g=a==null?void 0:a[p];if(g)return s[h]=g(d(f[1]));switch(p){case"Date":s[h]=new Date(f[1]);break;case"Set":const m=new Set;s[h]=m;for(let k=1;k<f.length;k+=1)m.add(d(f[k]));break;case"Map":const D=new Map;s[h]=D;for(let k=1;k<f.length;k+=2)D.set(d(f[k]),d(f[k+1]));break;case"RegExp":s[h]=new RegExp(f[1],f[2]);break;case"Object":s[h]=Object(f[1]);break;case"BigInt":s[h]=BigInt(f[1]);break;case"null":const N=Object.create(null);s[h]=N;for(let k=1;k<f.length;k+=2)N[f[k]]=d(f[k+1]);break;default:throw new Error(`Unknown type ${p}`)}}else{const p=new Array(f.length);s[h]=p;for(let g=0;g<f.length;g+=1){const m=f[g];m!==Pt&&(p[g]=d(m))}}else{const p={};s[h]=p;for(const g in f){const m=f[g];p[g]=d(m)}}return s[h]}return d(0)}function Tt(t){return t.filter(a=>a!=null)}var et;const W=(et=rt(nt))!=null?et:{};var tt;const ae=(tt=rt(at))!=null?tt:{};function Ie(t){W[t]=re()}function Dt(t,a){var Fe;const i=It(t),s=t.nodes[0],d=t.nodes[1];s(),d();const h=document.documentElement,I=[],f=[];let p=null;const g={before_navigate:[],after_navigate:[]};let m={branch:[],error:null,url:null},D=!1,N=!1,k=!0,x=!1,j=!1,X=!1,K=!1,V,$=(Fe=history.state)==null?void 0:Fe[H];$||($=Date.now(),history.replaceState(G(M({},history.state),{[H]:$}),"",location.href));const ye=W[$];ye&&(history.scrollRestoration="manual",scrollTo(ye.x,ye.y));let z,se,ce;function Pe(){return P(this,null,function*(){ce=ce||Promise.resolve(),yield ce,ce=null;const e=new URL(location.href),n=ee(e,!0);p=null;const o=se={},r=n&&(yield be(n));if(o===se&&r){if(r.type==="redirect")return le(new URL(r.location,e).href,{},[e.pathname],o);V.$set(r.props)}})}function Ue(e){f.some(n=>n==null?void 0:n.snapshot)&&(ae[e]=f.map(n=>{var o;return(o=n==null?void 0:n.snapshot)==null?void 0:o.capture()}))}function je(e){var n;(n=ae[e])==null||n.forEach((o,r)=>{var l,c;(c=(l=f[r])==null?void 0:l.snapshot)==null||c.restore(o)})}function Ne(){Ie($),Xe(nt,W),Ue($),Xe(at,ae)}function le(v,_,S,w){return P(this,arguments,function*(e,{noScroll:n=!1,replaceState:o=!1,keepFocus:r=!1,state:l={},invalidateAll:c=!1},y,b){return typeof e=="string"&&(e=new URL(e,Ge(document))),he({url:e,scroll:n?re():null,keepfocus:r,redirect_chain:y,details:{state:l,replaceState:o},nav_token:b,accepted:()=>{c&&(K=!0)},blocked:()=>{},type:"goto"})})}function xe(e){return P(this,null,function*(){return p={id:e.id,promise:be(e).then(n=>(n.type==="loaded"&&n.state.error&&(p=null),n))},p.promise})}function fe(...e){return P(this,null,function*(){const o=i.filter(r=>e.some(l=>r.exec(l))).map(r=>Promise.all([...r.layouts,r.leaf].map(l=>l==null?void 0:l[1]())));yield Promise.all(o)})}function $e(e){var r,l;m=e.state;const n=document.querySelector("style[data-sveltekit]");n&&n.remove(),z=e.props.page,V=new t.root({target:a,props:G(M({},e.props),{stores:J,components:f}),hydrate:!0}),je($);const o={from:null,to:{params:m.params,route:{id:(l=(r=m.route)==null?void 0:r.id)!=null?l:null},url:new URL(location.href)},willUnload:!1,type:"enter"};g.after_navigate.forEach(c=>c(o)),N=!0}function Q(b){return P(this,arguments,function*({url:e,params:n,branch:o,status:r,error:l,route:c,form:y}){var E;let v="never";for(const O of o)(O==null?void 0:O.slash)!==void 0&&(v=O.slash);e.pathname=ut(e.pathname,v),e.search=e.search;const _={type:"loaded",state:{url:e,params:n,branch:o,error:l,route:c},props:{constructors:Tt(o).map(O=>O.node.component)}};y!==void 0&&(_.props.form=y);let S={},w=!z,A=0;for(let O=0;O<Math.max(o.length,m.branch.length);O+=1){const T=o[O],q=m.branch[O];(T==null?void 0:T.data)!==(q==null?void 0:q.data)&&(w=!0),T&&(S=M(M({},S),T.data),w&&(_.props[`data_${A}`]=S),A+=1)}return(!m.url||e.href!==m.url.href||m.error!==l||y!==void 0&&y!==z.form||w)&&(_.props.page={error:l,params:n,route:{id:(E=c==null?void 0:c.id)!=null?E:null},status:r,url:new URL(e),form:y!=null?y:null,data:w?S:z.data}),_})}function we(y){return P(this,arguments,function*({loader:e,parent:n,url:o,params:r,route:l,server_data_node:c}){var S,w,A,C,E,O,T;let b=null;const v={dependencies:new Set,params:new Set,parent:!1,route:!1,url:!1},_=yield e();if((S=_.universal)!=null&&S.load){let q=function(...u){for(const R of u){const{href:L}=new URL(R,o);v.dependencies.add(L)}},ne;const F={route:{get id(){return v.route=!0,l.id}},params:new Proxy(r,{get:(u,R)=>(v.params.add(R),u[R])}),data:(w=c==null?void 0:c.data)!=null?w:null,url:mt(o,()=>{v.url=!0}),fetch(u,R){return P(this,null,function*(){let L;u instanceof Request?(L=u.url,R=M({body:u.method==="GET"||u.method==="HEAD"?void 0:yield u.blob(),cache:u.cache,credentials:u.credentials,headers:u.headers,integrity:u.integrity,keepalive:u.keepalive,method:u.method,mode:u.mode,redirect:u.redirect,referrer:u.referrer,referrerPolicy:u.referrerPolicy,signal:u.signal},R)):L=u;const U=new URL(L,o);return q(U.href),U.origin===o.origin&&(L=U.href.slice(o.origin.length)),N?vt(L,U.href,R):bt(L,R)})},setHeaders:()=>{},depends:q,parent(){return v.parent=!0,n()}};b=(A=yield _.universal.load.call(null,F))!=null?A:null,b=b?yield At(b):null}return{node:_,loader:e,server:c,universal:(C=_.universal)!=null&&C.load?{type:"data",data:b,uses:v}:null,data:(E=b!=null?b:c==null?void 0:c.data)!=null?E:null,slash:(T=(O=_.universal)==null?void 0:O.trailingSlash)!=null?T:c==null?void 0:c.slash}})}function Te(e,n,o,r,l){if(K)return!0;if(!r)return!1;if(r.parent&&e||r.route&&n||r.url&&o)return!0;for(const c of r.params)if(l[c]!==m.params[c])return!0;for(const c of r.dependencies)if(I.some(y=>y(new URL(c))))return!0;return!1}function _e(e,n){return(e==null?void 0:e.type)==="data"?e:(e==null?void 0:e.type)==="skip"&&n!=null?n:null}function be(c){return P(this,arguments,function*({id:e,invalidating:n,url:o,params:r,route:l}){var ne;if((p==null?void 0:p.id)===e)return p.promise;const{errors:y,layouts:b,leaf:v}=l,_=[...b,v];y.forEach(u=>u==null?void 0:u().catch(()=>{})),_.forEach(u=>u==null?void 0:u[1]().catch(()=>{}));let S=null;const w=m.url?e!==m.url.pathname+m.url.search:!1,A=m.route?l.id!==m.route.id:!1;let C=!1;const E=_.map((u,R)=>{var B;const L=m.branch[R],U=!!(u!=null&&u[0])&&((L==null?void 0:L.loader)!==u[1]||Te(C,A,w,(B=L.server)==null?void 0:B.uses,r));return U&&(C=!0),U});if(E.some(Boolean)){try{S=yield Qe(o,E)}catch(u){return ue({status:u instanceof oe?u.status:500,error:yield te(u,{url:o,params:r,route:{id:l.id}}),url:o,route:l})}if(S.type==="redirect")return S}const O=S==null?void 0:S.nodes;let T=!1;const q=_.map((u,R)=>P(this,null,function*(){var ve;if(!u)return;const L=m.branch[R],U=O==null?void 0:O[R];if((!U||U.type==="skip")&&u[1]===(L==null?void 0:L.loader)&&!Te(T,A,w,(ve=L.universal)==null?void 0:ve.uses,r))return L;if(T=!0,(U==null?void 0:U.type)==="error")throw U;return we({loader:u[1],url:o,params:r,route:l,parent:()=>P(this,null,function*(){var He;const Me={};for(let Ee=0;Ee<R;Ee+=1)Object.assign(Me,(He=yield q[Ee])==null?void 0:He.data);return Me}),server_data_node:_e(U===void 0&&u[0]?{type:"skip"}:U!=null?U:null,u[0]?L==null?void 0:L.server:void 0)})}));for(const u of q)u.catch(()=>{});const F=[];for(let u=0;u<_.length;u+=1)if(_[u])try{F.push(yield q[u])}catch(R){if(R instanceof Ze)return{type:"redirect",location:R.location};let L=500,U;if(O!=null&&O.includes(R))L=(ne=R.status)!=null?ne:L,U=R.error;else if(R instanceof oe)L=R.status,U=R.body;else{if(yield J.updated.check())return yield Z(o);U=yield te(R,{params:r,url:o,route:{id:l.id}})}const B=yield De(u,F,y);return B?yield Q({url:o,params:r,branch:F.slice(0,B.idx).concat(B.node),status:L,error:U,route:l}):yield qe(o,{id:l.id},U,L)}else F.push(void 0);return yield Q({url:o,params:r,branch:F,status:200,error:null,route:l,form:n?void 0:null})})}function De(e,n,o){return P(this,null,function*(){for(;e--;)if(o[e]){let r=e;for(;!n[r];)r-=1;try{return{idx:r+1,node:{node:yield o[e](),loader:o[e],data:{},server:null,universal:null}}}catch(l){continue}}})}function ue(l){return P(this,arguments,function*({status:e,error:n,url:o,route:r}){var S;const c={};let y=null;if(t.server_loads[0]===0)try{const w=yield Qe(o,[!0]);if(w.type!=="data"||w.nodes[0]&&w.nodes[0].type!=="data")throw 0;y=(S=w.nodes[0])!=null?S:null}catch(w){(o.origin!==location.origin||o.pathname!==location.pathname||D)&&(yield Z(o))}const v=yield we({loader:s,url:o,params:c,route:r,parent:()=>Promise.resolve({}),server_data_node:_e(y)}),_={node:yield d(),loader:d,universal:null,server:null,data:null};return yield Q({url:o,params:c,branch:[v,_],status:e,error:n,route:null})})}function ee(e,n){if(Re(e,Y))return;const o=de(e);for(const r of i){const l=r.exec(o);if(l)return{id:e.pathname+e.search,invalidating:n,route:r,params:ht(l),url:e}}}function de(e){return dt(e.pathname.slice(Y.length)||"/")}function Ce({url:e,type:n,intent:o,delta:r}){var b,v,_,S,w;let l=!1;const c={from:{params:m.params,route:{id:(v=(b=m.route)==null?void 0:b.id)!=null?v:null},url:m.url},to:{params:(_=o==null?void 0:o.params)!=null?_:null,route:{id:(w=(S=o==null?void 0:o.route)==null?void 0:S.id)!=null?w:null},url:e},willUnload:!o,type:n};r!==void 0&&(c.delta=r);const y=G(M({},c),{cancel:()=>{l=!0}});return j||g.before_navigate.forEach(A=>A(y)),l?null:c}function he(S){return P(this,arguments,function*({url:e,scroll:n,keepfocus:o,redirect_chain:r,details:l,type:c,delta:y,nav_token:b={},accepted:v,blocked:_}){var q,F,ne;const w=ee(e,!1),A=Ce({url:e,type:c,delta:y,intent:w});if(!A){_();return}const C=$;v(),j=!0,N&&J.navigating.set(A),se=b;let E=w&&(yield be(w));if(!E){if(Re(e,Y))return yield Z(e);E=yield qe(e,{id:null},yield te(new Error(`Not found: ${e.pathname}`),{url:e,params:{},route:{id:null}}),404)}if(e=(w==null?void 0:w.url)||e,se!==b)return!1;if(E.type==="redirect")if(r.length>10||r.includes(e.pathname))E=yield ue({status:500,error:yield te(new Error("Redirect loop"),{url:e,params:{},route:{id:null}}),url:e,route:{id:null}});else return le(new URL(E.location,e).href,{},[...r,e.pathname],b),!1;else((q=E.props.page)==null?void 0:q.status)>=400&&(yield J.updated.check())&&(yield Z(e));if(I.length=0,K=!1,x=!0,Ie(C),Ue(C),(F=E.props.page)!=null&&F.url&&E.props.page.url.pathname!==e.pathname&&(e.pathname=(ne=E.props.page)==null?void 0:ne.url.pathname),l){const u=l.replaceState?0:1;if(l.state[H]=$+=u,history[l.replaceState?"replaceState":"pushState"](l.state,"",e),!l.replaceState){let R=$+1;for(;ae[R]||W[R];)delete ae[R],delete W[R],R+=1}}p=null,N?(m=E.state,E.props.page&&(E.props.page.url=e),V.$set(E.props)):$e(E);const{activeElement:O}=document;if(yield ke(),k){const u=e.hash&&document.getElementById(decodeURIComponent(e.hash.slice(1)));n?scrollTo(n.x,n.y):u?u.scrollIntoView():scrollTo(0,0)}const T=document.activeElement!==O&&document.activeElement!==document.body;!o&&!T&&(yield Ae()),k=!0,E.props.page&&(z=E.props.page),j=!1,g.after_navigate.forEach(u=>u(A)),J.navigating.set(null),x=!1})}function qe(e,n,o,r){return P(this,null,function*(){return e.origin===location.origin&&e.pathname===location.pathname&&!D?yield ue({status:r,error:o,url:e,route:n}):yield Z(e)})}function Z(e){return location.href=e.href,new Promise(()=>{})}function it(){let e;h.addEventListener("mousemove",c=>{const y=c.target;clearTimeout(e),e=setTimeout(()=>{r(y,2)},20)});function n(c){r(c.composedPath()[0],1)}h.addEventListener("mousedown",n),h.addEventListener("touchstart",n,{passive:!0});const o=new IntersectionObserver(c=>{for(const y of c)y.isIntersecting&&(fe(de(new URL(y.target.href))),o.unobserve(y.target))},{threshold:0});function r(c,y){const b=Ye(c,h);if(!b)return;const{url:v,external:_,download:S}=Se(b,Y);if(_||S)return;const w=me(b);if(!w.reload)if(y<=w.preload_data){const A=ee(v,!1);A&&xe(A)}else y<=w.preload_code&&fe(de(v))}function l(){o.disconnect();for(const c of h.querySelectorAll("a")){const{url:y,external:b,download:v}=Se(c,Y);if(b||v)continue;const _=me(c);_.reload||(_.preload_code===We.viewport&&o.observe(c),_.preload_code===We.eager&&fe(de(y)))}}g.after_navigate.push(l),l()}function te(e,n){var o;return e instanceof oe?e.body:(o=t.hooks.handleError({error:e,event:n}))!=null?o:{message:n.route.id!=null?"Internal Error":"Not Found"}}return{after_navigate:e=>{Be(()=>(g.after_navigate.push(e),()=>{const n=g.after_navigate.indexOf(e);g.after_navigate.splice(n,1)}))},before_navigate:e=>{Be(()=>(g.before_navigate.push(e),()=>{const n=g.before_navigate.indexOf(e);g.before_navigate.splice(n,1)}))},disable_scroll_handling:()=>{(x||!N)&&(k=!1)},goto:(e,n={})=>le(e,n,[]),invalidate:e=>{if(typeof e=="function")I.push(e);else{const{href:n}=new URL(e,location.href);I.push(o=>o.href===n)}return Pe()},invalidateAll:()=>(K=!0,Pe()),preload_data:e=>P(this,null,function*(){const n=new URL(e,Ge(document)),o=ee(n,!1);if(!o)throw new Error(`Attempted to preload a URL that does not belong to this app: ${n}`);yield xe(o)}),preload_code:fe,apply_action:e=>P(this,null,function*(){var n;if(e.type==="error"){const o=new URL(location.href),{branch:r,route:l}=m;if(!l)return;const c=yield De(m.branch.length,r,l.errors);if(c){const y=yield Q({url:o,params:m.params,branch:r.slice(0,c.idx).concat(c.node),status:(n=e.status)!=null?n:500,error:e.error,route:l});m=y.state,V.$set(y.props),ke().then(Ae)}}else e.type==="redirect"?le(e.location,{invalidateAll:!0},[]):(V.$set({form:null,page:G(M({},z),{form:e.data,status:e.status})}),yield ke(),V.$set({form:e.data}),e.type==="success"&&Ae())}),_start_router:()=>{var e;history.scrollRestoration="manual",addEventListener("beforeunload",n=>{var r,l;let o=!1;if(Ne(),!j){const c={from:{params:m.params,route:{id:(l=(r=m.route)==null?void 0:r.id)!=null?l:null},url:m.url},to:null,willUnload:!0,type:"leave",cancel:()=>o=!0};g.before_navigate.forEach(y=>y(c))}o?(n.preventDefault(),n.returnValue=""):history.scrollRestoration="auto"}),addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&Ne()}),(e=navigator.connection)!=null&&e.saveData||it(),h.addEventListener("click",n=>{var w,A;if(n.button||n.which!==1||n.metaKey||n.ctrlKey||n.shiftKey||n.altKey||n.defaultPrevented)return;const o=Ye(n.composedPath()[0],h);if(!o)return;const{url:r,external:l,target:c,download:y}=Se(o,Y);if(!r)return;if(c==="_parent"||c==="_top"){if(window.parent!==window)return}else if(c&&c!=="_self")return;const b=me(o);if(!(o instanceof SVGAElement)&&r.protocol!==location.protocol&&!(r.protocol==="https:"||r.protocol==="http:")||y)return;if(l||b.reload){Ce({url:r,type:"link"})?j=!0:n.preventDefault();return}const[_,S]=r.href.split("#");if(S!==void 0&&_===location.href.split("#")[0]){if(X=!0,Ie($),m.url=r,J.page.set(G(M({},z),{url:r})),J.page.notify(),!b.replace_state)return;X=!1,n.preventDefault()}he({url:r,scroll:b.noscroll?re():null,keepfocus:(w=b.keep_focus)!=null?w:!1,redirect_chain:[],details:{state:{},replaceState:(A=b.replace_state)!=null?A:r.href===location.href},accepted:()=>n.preventDefault(),blocked:()=>n.preventDefault(),type:"link"})}),h.addEventListener("submit",n=>{var C;if(n.defaultPrevented)return;const o=HTMLFormElement.prototype.cloneNode.call(n.target),r=n.submitter;if(((r==null?void 0:r.formMethod)||o.method)!=="get")return;const c=new URL((r==null?void 0:r.hasAttribute("formaction"))&&(r==null?void 0:r.formAction)||o.action);if(Re(c,Y))return;const y=n.target,{keep_focus:b,noscroll:v,reload:_,replace_state:S}=me(y);if(_)return;n.preventDefault(),n.stopPropagation();const w=new FormData(y),A=r==null?void 0:r.getAttribute("name");A&&w.append(A,(C=r==null?void 0:r.getAttribute("value"))!=null?C:""),c.search=new URLSearchParams(w).toString(),he({url:c,scroll:v?re():null,keepfocus:b!=null?b:!1,redirect_chain:[],details:{state:{},replaceState:S!=null?S:c.href===location.href},nav_token:{},accepted:()=>{},blocked:()=>{},type:"form"})}),addEventListener("popstate",n=>P(this,null,function*(){var o;if((o=n.state)!=null&&o[H]){if(n.state[H]===$)return;const r=W[n.state[H]];if(m.url.href.split("#")[0]===location.href.split("#")[0]){W[$]=re(),$=n.state[H],scrollTo(r.x,r.y);return}const l=n.state[H]-$;let c=!1;yield he({url:new URL(location.href),scroll:r,keepfocus:!1,redirect_chain:[],details:null,accepted:()=>{$=n.state[H]},blocked:()=>{history.go(-l),c=!0},type:"popstate",delta:l}),c||je($)}})),addEventListener("hashchange",()=>{X&&(X=!1,history.replaceState(G(M({},history.state),{[H]:++$}),"",location.href))});for(const n of document.querySelectorAll("link"))n.rel==="icon"&&(n.href=n.href);addEventListener("pageshow",n=>{n.persisted&&J.navigating.set(null)})},_hydrate:b=>P(this,[b],function*({status:e=200,error:n,node_ids:o,params:r,route:l,data:c,form:y}){var S;D=!0;const v=new URL(location.href);({params:r={},route:l={id:null}}=ee(v,!1)||{});let _;try{const w=o.map((A,C)=>P(this,null,function*(){const E=c[C];return E!=null&&E.uses&&(E.uses=ot(E.uses)),we({loader:t.nodes[A],url:v,params:r,route:l,parent:()=>P(this,null,function*(){const O={};for(let T=0;T<C;T+=1)Object.assign(O,(yield w[T]).data);return O}),server_data_node:_e(E)})}));_=yield Q({url:v,params:r,branch:yield Promise.all(w),status:e,error:n,form:y,route:(S=i.find(({id:A})=>A===l.id))!=null?S:null})}catch(w){if(w instanceof Ze){yield Z(new URL(w.location,location.href));return}_=yield ue({status:w instanceof oe?w.status:500,error:yield te(w,{url:v,params:r,route:l}),url:v,route:l})}$e(_)})}}function Qe(t,a){return P(this,null,function*(){const i=new URL(t);i.pathname=wt(t.pathname),i.searchParams.append("x-sveltekit-invalidated",a.map(d=>d?"1":"").join("_"));const s=yield ge(i.href);if(!s.ok)throw new oe(s.status,yield s.json());return new Promise(d=>P(this,null,function*(){var m;const h=new Map,I=s.body.getReader(),f=new TextDecoder;function p(D){return $t(D,{Promise:N=>new Promise((k,x)=>{h.set(N,{fulfil:k,reject:x})})})}let g="";for(;;){const{done:D,value:N}=yield I.read();if(D&&!g)break;for(g+=!N&&g?`
`:f.decode(N);;){const k=g.indexOf(`
`);if(k===-1)break;const x=JSON.parse(g.slice(0,k));if(g=g.slice(k+1),x.type==="redirect")return d(x);if(x.type==="data")(m=x.nodes)==null||m.forEach(j=>{(j==null?void 0:j.type)==="data"&&(j.uses=ot(j.uses),j.data=p(j.data))}),d(x);else if(x.type==="chunk"){const{id:j,data:X,error:K}=x,V=h.get(j);h.delete(j),K?V.reject(p(K)):V.fulfil(p(X))}}}}))})}function ot(t){var a,i;return{dependencies:new Set((a=t==null?void 0:t.dependencies)!=null?a:[]),params:new Set((i=t==null?void 0:t.params)!=null?i:[]),parent:!!(t!=null&&t.parent),route:!!(t!=null&&t.route),url:!!(t!=null&&t.url)}}function Ae(){const t=document.querySelector("[autofocus]");if(t)t.focus();else{const a=document.body,i=a.getAttribute("tabindex");return a.tabIndex=-1,a.focus({preventScroll:!0}),i!==null?a.setAttribute("tabindex",i):a.removeAttribute("tabindex"),new Promise(s=>{setTimeout(()=>{var d;s((d=getSelection())==null?void 0:d.removeAllRanges())})})}}function Vt(t,a,i){return P(this,null,function*(){const s=Dt(t,a);ft({client:s}),i?yield s._hydrate(i):s.goto(location.href,{replaceState:!0}),s._start_router()})}export{Vt as start};
